#Authorize
SAuthと呼ばれる認証システムを利用してMisskey APIとのやりとりを行います。
SAuthを用いてMisskey APIにアクセスするには、アクセスを行う側であるアプリケーションを登録し、App keyとUser keyを取得する必要があります。

App keyは、アプリケーションを識別するための一意なキー コードです。アプリケーションを登録した際に発行されます。

User keyは、あなたのアプリケーションと連携したユーザーに値付けられたキー コードで、つまりあなたのアプリケーションを利用するユーザーのパスワードのようなものです。

アプリケーションは、それらのキーを取得することで、Misskey APIを利用することができます。

##App keyの取得(アプリケーションの登録)
1. [Misskey developer center](http://dev.misskey.xyz)にアクセス
2. ページ右上のアイコンをクリックしアプリケーション管理ページへ移動
3. +アイコンをクリックし新規アプリケーション登録ページへ移動
4. フォームに必要事項を記入し登録を申請
  - Name
    - あなたのアプリケーション名です。
  - ID
    - アプリケーションID。半角英数字、ハイフンが使用できます。
  - Description
    - アプリケーションの簡単な説明。
 - Callback URL
    - 認証時のコールバックURL。このアプリケーションが、Webアプリケーションでない場合は省略してください。
5. アプリケーションが無事登録されるとアプリケーション設定ページに遷移します。「App key」タブを選択し、表示されたApp keyをメモします。

##User keyの取得
認証フォームを経由して、ユーザーにあなたのアプリケーションがアカウントにアクセスすることを許可してもらう必要があります。
ここでは、その認証フォームを表示して最終的にユーザーのUser Keyを取得するフローを順を追って説明します。

1. https://api.misskey.xyz/sauth/get-authentication-session-key にGETリクエストを送る
  - HTTPヘッダーに``sauth-app-key``としてあなたのアプリケーションのApp Keyを含めてください。
2. レスポンスとして``authenticationSessionKey``(以下Session Key)が(デフォルトで)JSON形式で手に入ります。
  - このSession Keyは、今から行う認証フローの間、必要になります。
3. **https://api.misskey.xyz/authorize@(Session Key)**をユーザーのブラウザで開きます。
  - 例えば、2.で入手したSession Keyが``kyoppie``なら、https://api.misskey.xyz/authorize@kyoppie です。
4. ブラウザに認証フォームが表示されるので、ユーザーはそのフォームに従いアプリケーションの連携を許可するか拒否する
5. ユーザーが連携を許可した場合、ブラウザに続けてPINコードが表示されます。(PINコードは、例えるなら連携を許可したユーザーのUser Key引換券のようなものです。)あなたのアプリケーションに、そのPINコードを入力してもらうようにしてください。
  - 注意：あなたのアプリケーションがデスクトップ・アプリケーションなどではなく、Webアプリケーションの場合、PINコードは表示されずに、アプリケーション登録時に設定されたCallback URLにGETパラメータの``pin-code``としてPINコードを添付したリクエストが送信されます。
6. ユーザーがあなたのアプリケーションに表示されたPINコードを入力し、これでPINコードが入手できました。
7. https://api.misskey.xyz/sauth/get-user-key にGETリクエストを送信し、User Keyを発行してもらいます。
  - HTTPヘッダーに``sauth-app-key``としてあなたのアプリケーションのApp Keyを含めてください。
  - パラメータに以下を含めてください。
    * ``pin-code`` : 入手したPINコード
    * ``authentication-session-key`` : Session Key
8. レスポンスとしてuserKeyがJSON形式で手に入ります。User Keyの他に、認証したユーザーの情報も含まれています。
9. これで完了です。APIにアクセスできます。
  - APIにアクセスするときは、HTTPヘッダーに以下の情報を含めてください。
    * ``sauth-app-key`` : あなたのアプリケーションのApp Key
    * ``sauth-user-key`` : 入手したUser Key

# レートリミッティングシステム
一部のAPIにはアクセス数のリミットが設定されています。
アクセス可能な上限とアクセス数カウントのリセット間隔はAPI毎に定められています。
